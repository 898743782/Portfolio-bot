<script src="https://cdn.botpress.cloud/webchat/v3.2/inject.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const launcher = document.querySelector(".jr-chat-launcher");
  const chatWin = document.querySelector(".jr-chat-window");
  const closeBtn = document.getElementById("jr-close");
  let botpressLoaded = false;

  launcher.addEventListener("click", () => {
    chatWin.style.display = "flex";

    if (!botpressLoaded) {
      window.botpressWebChat.init({
        configUrl: "https://files.bpcontent.cloud/2025/08/23/18/20250823184746-X0OTQ21K.json",
        container: document.getElementById("jr-chat-body"),
        hideWidget: true
      });
      botpressLoaded = true;
      // Give the Botpress iframe a moment to mount, then size it
      setTimeout(() => {
        const bpFrame = document.querySelector("#jr-chat-body iframe");
        if (bpFrame) {
          bpFrame.style.width = "100%";
          bpFrame.style.height = "100%";
          bpFrame.style.border = "0";
        }
      }, 1000);
    }
  });

  closeBtn.addEventListener("click", () => {
    chatWin.style.display = "none";
  });
});
</script>
